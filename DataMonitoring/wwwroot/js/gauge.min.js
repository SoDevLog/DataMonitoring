(function(){var v,p,w,r,s,u,f,h,t,e,c,o,n,l,y,b=[].slice,a={}.hasOwnProperty,i=function(n,t){function r(){this.constructor=n}for(var i in t)a.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};(function(){var i,r,n,f,e,t,u;for(u=["ms","moz","webkit","o"],n=0,e=u.length;n<e;n++){if(t=u[n],window.requestAnimationFrame)break;window.requestAnimationFrame=window[t+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]}if(i=null,f=0,r={},requestAnimationFrame){if(!window.cancelAnimationFrame)return i=window.requestAnimationFrame,window.requestAnimationFrame=function(n,t){var u;return u=++f,i(function(){if(!r[u])return n()},t),u},window.cancelAnimationFrame=function(n){return r[n]=!0}}else return window.requestAnimationFrame=function(n){var t,r,u,i;return t=(new Date).getTime(),i=Math.max(0,16-(t-u)),r=window.setTimeout(function(){return n(t+i)},i),u=t+i,r},window.cancelAnimationFrame=function(n){return clearTimeout(n)}})();y=function(n){var t,i;for(t=Math.floor(n/3600),i=Math.floor((n-t*3600)/60),n-=t*3600+i*60,n+="",i+="";i.length<2;)i="0"+i;while(n.length<2)n="0"+n;return t=t?t+":":"",t+i+":"+n};n=function(){var t,n,i;return n=1<=arguments.length?b.call(arguments,0):[],i=n[0],t=0||n[1],c(i.toFixed(t))};l=function(n,t){var i,r,u;r={};for(i in n)a.call(n,i)&&(u=n[i],r[i]=u);for(i in t)a.call(t,i)&&(u=t[i],r[i]=u);return r};c=function(n){var r,i,t,u;for(n+="",i=n.split("."),t=i[0],u="",i.length>1&&(u="."+i[1]),r=/(\d+)(\d{3})/;r.test(t);)t=t.replace(r,"$1,$2");return t+u};o=function(n){return n.charAt(0)==="#"?n.substring(1,7):n};e=function(){function n(n,t){n==null&&(n=!0);this.clear=t!=null?t:!0;n&&AnimationUpdater.add(this)}return n.prototype.animationSpeed=32,n.prototype.update=function(n){var t;return(n==null&&(n=!1),n||this.displayedValue!==this.value)?(this.ctx&&this.clear&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),t=this.value-this.displayedValue,this.displayedValue=Math.abs(t/this.animationSpeed)<=.001?this.value:this.displayedValue+t/this.animationSpeed,this.render(),!0):!1},n}();s=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.displayScale=1,r.prototype.forceUpdate=!0,r.prototype.setTextField=function(n,i){return this.textField=n instanceof t?n:new t(n,i)},r.prototype.setMinValue=function(n,t){var f,i,e,r,u;if(this.minValue=n,t==null&&(t=!0),t){for(this.displayedValue=this.minValue,r=this.gp||[],u=[],i=0,e=r.length;i<e;i++)f=r[i],u.push(f.displayedValue=this.minValue);return u}},r.prototype.setOptions=function(n){return n==null&&(n=null),this.options=l(this.options,n),this.textField&&(this.textField.el.style.fontSize=n.fontSize+"px"),this.options.angle>.5&&(this.options.angle=.5),this.configDisplayScale(),this},r.prototype.configDisplayScale=function(){var i,r,n,u,t;return u=this.displayScale,this.options.highDpiSupport===!1?delete this.displayScale:(r=window.devicePixelRatio||1,i=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.displayScale=r/i),this.displayScale!==u&&(t=this.canvas.G__width||this.canvas.width,n=this.canvas.G__height||this.canvas.height,this.canvas.width=t*this.displayScale,this.canvas.height=n*this.displayScale,this.canvas.style.width=t+"px",this.canvas.style.height=n+"px",this.canvas.G__width=t,this.canvas.G__height=n),this},r.prototype.parseValue=function(n){return n=parseFloat(n)||Number(n),isFinite(n)?n:0},r}(e);t=function(){function t(n,t){this.el=n;this.fractionDigits=t}return t.prototype.render=function(t){return this.el.innerHTML=n(t.displayedValue,this.fractionDigits)},t}();v=function(t){function r(n,t){if(this.elem=n,this.text=t!=null?t:!1,r.__super__.constructor.call(this),this.elem===void 0)throw new Error("The element isn't defined.");this.value=1*this.elem.innerHTML;this.text&&(this.value=0)}return i(r,t),r.prototype.displayedValue=0,r.prototype.value=0,r.prototype.setVal=function(n){return this.value=1*n},r.prototype.render=function(){var t;return t=this.text?y(this.displayedValue.toFixed(0)):c(n(this.displayedValue)),this.elem.innerHTML=t},r}(e);p={create:function(n){var r,t,u,i;for(i=[],t=0,u=n.length;t<u;t++)r=n[t],i.push(new v(r));return i}};h=function(t){function r(n){if(this.gauge=n,this.gauge===void 0)throw new Error("The element isn't defined.");this.ctx=this.gauge.ctx;this.canvas=this.gauge.canvas;r.__super__.constructor.call(this,!1,!1);this.setOptions()}return i(r,t),r.prototype.displayedValue=0,r.prototype.value=0,r.prototype.options={strokeWidth:.035,length:.1,color:"#000000",textColor:"#FFFFFF",font:"20px Times",iconPath:null,iconScale:1,iconAngle:0},r.prototype.img=null,r.prototype.setOptions=function(n){return n==null&&(n=null),this.options=l(this.options,n),this.length=2*this.gauge.radius*this.gauge.options.radiusScale*this.options.length,this.strokeWidth=this.options.strokeWidth,this.textColor=this.options.textColor,this.font=this.options.font,this.maxValue=this.gauge.maxValue,this.minValue=this.gauge.minValue,this.animationSpeed=this.gauge.animationSpeed,this.options.angle=this.gauge.options.angle,this.options.iconPath?(this.img=new Image,this.img.src=this.options.iconPath):void 0},r.prototype.render=function(){var t,e,o,i,r,s,h,u,f;return t=this.gauge.options.limitMax?this.displayedValue>this.maxValue?this.gauge.getAngle.call(this,this.maxValue):this.gauge.getAngle.call(this,this.displayedValue):this.gauge.getAngle.call(this,this.displayedValue),u=Math.round(this.length*Math.cos(t)),f=Math.round(this.length*Math.sin(t)),s=Math.round(this.length/2*Math.cos(t)),h=Math.round(this.length/2*Math.sin(t)),e=Math.round(this.length/2*Math.cos(t-this.strokeWidth)),o=Math.round(this.length/2*Math.sin(t-this.strokeWidth)),this.ctx.beginPath(),this.ctx.fillStyle=this.options.color,this.ctx.moveTo(s,h),this.ctx.lineTo(u,f),this.ctx.lineTo(e,o),this.ctx.fill(),this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.strokeStyle=this.options.color,this.ctx.arc(0,0,this.length/2,Math.PI,Math.PI*2,!1),this.ctx.stroke(),this.ctx.font=this.options.font||"10px Times",this.ctx.fillStyle=this.options.textColor,this.ctx.textBaseline="bottom",this.ctx.textAlign="center",this.ctx.fillText(n(this.displayedValue),0,10),this.img?(i=Math.round(this.img.width*this.options.iconScale),r=Math.round(this.img.height*this.options.iconScale),this.ctx.save(),this.ctx.translate(u,f),this.ctx.rotate(t+Math.PI/180*(90+this.options.iconAngle)),this.ctx.drawImage(this.img,-i/2,-r/2,i,r),this.ctx.restore()):void 0},r}(e);w=function(){function t(n){this.elem=n}return t.prototype.updateValues=function(n){return this.value=n[0],this.maxValue=n[1],this.avgValue=n[2],this.render()},t.prototype.render=function(){var t,i;return this.textField&&this.textField.text(n(this.value)),this.maxValue===0&&(this.maxValue=this.avgValue*2),i=this.value/this.maxValue*100,t=this.avgValue/this.maxValue*100,$(".bar-value",this.elem).css({width:i+"%"}),$(".typical-value",this.elem).css({width:t+"%"})},t}();f=function(t){function r(n){var t,i;this.canvas=n;r.__super__.constructor.call(this);this.percentColors=null;typeof G_vmlCanvasManager!="undefined"&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas));this.ctx=this.canvas.getContext("2d");t=this.canvas.clientHeight;i=this.canvas.clientWidth;this.canvas.height=t;this.canvas.width=i;this.gp=[new h(this)];this.setOptions()}return i(r,t),r.prototype.elem=null,r.prototype.value=[20],r.prototype.maxValue=80,r.prototype.minValue=0,r.prototype.displayedAngle=0,r.prototype.displayedValue=0,r.prototype.lineWidth=40,r.prototype.paddingTop=.01,r.prototype.paddingBottom=.2,r.prototype.percentColors=null,r.prototype.options={colorStart:"#6fadcf",colorStop:void 0,gradientType:0,strokeColor:"#e0e0e0",pointer:{length:.8,strokeWidth:.035,iconScale:1},angle:.15,lineWidth:.44,radiusScale:1,fontSize:40,limitMax:!1,limitMin:!1},r.prototype.setOptions=function(n){var i,t,f,e,u;for(n==null&&(n=null),r.__super__.setOptions.call(this,n),this.configPercentColors(),this.extraPadding=0,this.options.angle<0&&(e=Math.PI*(1+this.options.angle),this.extraPadding=Math.sin(e)),this.availableHeight=this.canvas.height*(1-this.paddingTop-this.paddingBottom),this.lineWidth=this.availableHeight*this.options.lineWidth,this.radius=(this.availableHeight-this.lineWidth/2)/(1+this.extraPadding),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),u=this.gp,t=0,f=u.length;t<f;t++)i=u[t],i.setOptions(this.options.pointer),i.render();return this.render(),this},r.prototype.configPercentColors=function(){var u,f,n,t,i,r,e;if(this.percentColors=null,this.options.percentColors!==void 0){for(this.percentColors=[],r=[],n=t=0,i=this.options.percentColors.length-1;0<=i?t<=i:t>=i;n=0<=i?++t:--t)e=parseInt(o(this.options.percentColors[n][1]).substring(0,2),16),f=parseInt(o(this.options.percentColors[n][1]).substring(2,4),16),u=parseInt(o(this.options.percentColors[n][1]).substring(4,6),16),r.push(this.percentColors[n]={pct:this.options.percentColors[n][0],color:{r:e,g:f,b:u}});return r}},r.prototype.set=function(n){var s,t,r,u,o,c,f,e,i;for(n instanceof Array||(n=[n]),t=r=0,f=n.length-1;0<=f?r<=f:r>=f;t=0<=f?++r:--r)n[t]=this.parseValue(n[t]);if(n.length>this.gp.length)for(t=u=0,e=n.length-this.gp.length;0<=e?u<e:u>e;t=0<=e?++u:--u)s=new h(this),s.setOptions(this.options.pointer),this.gp.push(s);else n.length<this.gp.length&&(this.gp=this.gp.slice(this.gp.length-n.length));for(t=0,o=0,c=n.length;o<c;o++)i=n[o],i>this.maxValue?this.options.limitMax||(this.maxValue=i+1):i<this.minValue&&(this.options.limitMin?i=this.minValue:this.minValue=i-1),this.gp[t].value=i,this.gp[t++].setOptions({minValue:this.minValue,maxValue:this.maxValue,angle:this.options.angle});return this.value=Math.max(Math.min(n[n.length-1],this.maxValue),this.minValue),AnimationUpdater.run(this.forceUpdate),this.forceUpdate=!1},r.prototype.getAngle=function(n){return(1+this.options.angle)*Math.PI+(n-this.minValue)/(this.maxValue-this.minValue)*(1-this.options.angle*2)*Math.PI},r.prototype.getColorForPercentage=function(n,t){var i,e,u,o,r,s,f;if(n===0)i=this.percentColors[0].color;else for(i=this.percentColors[this.percentColors.length-1].color,u=o=0,s=this.percentColors.length-1;0<=s?o<=s:o>=s;u=0<=s?++o:--o)if(n<=this.percentColors[u].pct){t===!0?(f=this.percentColors[u-1]||this.percentColors[0],e=this.percentColors[u],r=(n-f.pct)/(e.pct-f.pct),i={r:Math.floor(f.color.r*(1-r)+e.color.r*r),g:Math.floor(f.color.g*(1-r)+e.color.g*r),b:Math.floor(f.color.b*(1-r)+e.color.b*r)}):i=this.percentColors[u].color;break}return"rgb("+[i.r,i.g,i.b].join(",")+")"},r.prototype.getColorForValue=function(n,t){var i;return i=(n-this.minValue)/(this.maxValue-this.minValue),this.getColorForPercentage(i,t)},r.prototype.renderStaticLabels=function(t,i,r,u){var o,c,e,y,s,a,v,l,h,f,k;for(o=t.font||"10px Times",a=/\d+\.?\d?/,s=o.match(a)[0],l=o.slice(s.length),c=parseFloat(s)*this.displayScale,this.ctx.font=c+l,this.ctx.fillStyle=t.color||"#000000",this.ctx.textBaseline="bottom",this.ctx.textAlign="center",v=t.labels,e=0,y=v.length;e<y;e++)if(f=v[e],f.label!==void 0)(!this.options.limitMin||f>=this.minValue)&&(!this.options.limitMax||f<=this.maxValue)&&(o=f.font||t.font,s=o.match(a)[0],l=o.slice(s.length),c=parseFloat(s)*this.displayScale,this.ctx.font=c+l,h=this.getAngle(f.label)-3*Math.PI/2,this.ctx.rotate(h),this.ctx.fillText(n(f.label,t.fractionDigits),0,-u-this.lineWidth/2),this.ctx.rotate(-h));else if((!this.options.limitMin||f>=this.minValue)&&(!this.options.limitMax||f<=this.maxValue)){h=this.getAngle(f)-3*Math.PI/2;this.ctx.fillStyle=t.colors[e]||"#000000";this.ctx.rotate(h);this.ctx.fillText(n(f,t.fractionDigits),0,-u-this.lineWidth/2);this.ctx.fillText(t.infos[e],0,-u-this.lineWidth/2-20);this.ctx.rotate(-h);var p=parseFloat(f),d=parseFloat(this.maxValue)-parseFloat(this.minValue),g=d/400,w=g*1,b=.7,nt=this.lineWidth/2*(1-b);tmpRadius=this.radius*this.options.radiusScale+nt;k=t.colors[e]||"#000000";this.ctx.lineWidth=this.lineWidth*b;this.ctx.strokeStyle=k;this.ctx.beginPath();this.ctx.arc(0,0,tmpRadius,this.getAngle(p-w),this.getAngle(p+w),!1);this.ctx.stroke()}return},r.prototype.renderTicks=function(n){var t,i,b,o,s,k,h,c,l,a,d,r,u,g,nt,f,v,y,p,w,e;if(n!=={}){for(k=n.divisions||0,p=n.subDivisions||0,b=n.divColor||"#fff",nt=n.subColor||"#fff",o=n.divLength||.7,v=n.subLength||.2,l=parseFloat(this.maxValue)-parseFloat(this.minValue),a=parseFloat(l)/parseFloat(n.divisions),f=parseFloat(a)/parseFloat(n.subDivisions),t=parseFloat(this.minValue),i=0+f,c=l/400,s=c*(n.divWidth||1),y=c*(n.subWidth||1),r=[],w=h=0,d=k+1;h<d;w=h+=1)this.ctx.lineWidth=this.lineWidth*o,u=this.lineWidth/2*(1-o),e=this.radius*this.options.radiusScale+u,this.ctx.strokeStyle=b,this.ctx.beginPath(),this.ctx.arc(0,0,e,this.getAngle(t-s),this.getAngle(t+s),!1),this.ctx.stroke(),i=t+f,t+=a,w!==n.divisions&&p>0?r.push(function(){var n,r,t;for(t=[],g=n=0,r=p-1;n<r;g=n+=1)this.ctx.lineWidth=this.lineWidth*v,u=this.lineWidth/2*(1-v),e=this.radius*this.options.radiusScale+u,this.ctx.strokeStyle=nt,this.ctx.beginPath(),this.ctx.arc(0,0,e,this.getAngle(i-y),this.getAngle(i+y),!1),this.ctx.stroke(),t.push(i+=f);return t}.call(this)):r.push(void 0);return r}},r.prototype.render=function(){var h,r,v,t,f,e,y,p,o,s,u,c,l,w,a,n,i;if(n=this.canvas.width/2,t=this.canvas.height*this.paddingTop+this.availableHeight-(this.radius+this.lineWidth/2)*this.extraPadding,h=this.getAngle(this.displayedValue),this.textField&&this.textField.render(this),this.ctx.lineCap="butt",u=this.radius*this.options.radiusScale,this.options.staticZones)for(this.ctx.save(),this.ctx.translate(n,t),this.ctx.lineWidth=this.lineWidth,c=this.options.staticZones,f=0,y=c.length;f<y;f++)i=c[f],s=i.min,this.options.limitMin&&s<this.minValue&&(s=this.minValue),o=i.max,this.options.limitMax&&o>this.maxValue&&(o=this.maxValue),a=this.radius*this.options.radiusScale,i.height&&(this.ctx.lineWidth=this.lineWidth*i.height,w=this.lineWidth/2*(i.offset||1-i.height),a=this.radius*this.options.radiusScale+w),this.ctx.strokeStyle=i.strokeStyle,this.ctx.beginPath(),this.ctx.arc(0,0,a,this.getAngle(s),this.getAngle(o),!1),this.ctx.stroke();else this.options.customFillStyle!==void 0?r=this.options.customFillStyle(this):this.percentColors!==null?r=this.getColorForValue(this.displayedValue,this.options.generateGradient):this.options.colorStop!==void 0?(r=this.options.gradientType===0?this.ctx.createRadialGradient(n,t,9,n,t,70):this.ctx.createLinearGradient(0,0,n,0),r.addColorStop(0,this.options.colorStart),r.addColorStop(1,this.options.colorStop)):r=this.options.colorStart,this.ctx.strokeStyle=r,this.ctx.beginPath(),this.ctx.arc(n,t,u,(1+this.options.angle)*Math.PI,h,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.stroke(),this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(n,t,u,h,(2-this.options.angle)*Math.PI,!1),this.ctx.stroke(),this.ctx.save(),this.ctx.translate(n,t);for(this.ctx.lineCap="butt",this.options.staticLabels&&this.renderStaticLabels(this.options.staticLabels,n,t,u),this.options.renderTicks&&this.renderTicks(this.options.renderTicks,n,t,u),this.ctx.restore(),this.ctx.translate(n,t),l=this.gp,e=0,p=l.length;e<p;e++)v=l[e],v.update(!0);return this.ctx.translate(-n,-t)},r}(s);r=function(n){function t(n){this.canvas=n;t.__super__.constructor.call(this);typeof G_vmlCanvasManager!="undefined"&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas));this.ctx=this.canvas.getContext("2d");this.setOptions();this.render()}return i(t,n),t.prototype.lineWidth=15,t.prototype.displayedValue=0,t.prototype.value=33,t.prototype.maxValue=80,t.prototype.minValue=0,t.prototype.options={lineWidth:.1,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:.35,radiusScale:1},t.prototype.getAngle=function(n){return(1-this.options.angle)*Math.PI+(n-this.minValue)/(this.maxValue-this.minValue)*(2+this.options.angle-(1-this.options.angle))*Math.PI},t.prototype.setOptions=function(n){return n==null&&(n=null),t.__super__.setOptions.call(this,n),this.lineWidth=this.canvas.height*this.options.lineWidth,this.radius=this.options.radiusScale*(this.canvas.height/2-this.lineWidth/2),this},t.prototype.set=function(n){return this.value=this.parseValue(n),this.value>this.maxValue?this.options.limitMax?this.value=this.maxValue:this.maxValue=this.value:this.value<this.minValue&&(this.options.limitMin?this.value=this.minValue:this.minValue=this.value),AnimationUpdater.run(this.forceUpdate),this.forceUpdate=!1},t.prototype.render=function(){var r,i,n,u,f,t;return r=this.getAngle(this.displayedValue),t=this.canvas.width/2,n=this.canvas.height/2,this.textField&&this.textField.render(this),i=this.ctx.createRadialGradient(t,n,39,t,n,70),i.addColorStop(0,this.options.colorStart),i.addColorStop(1,this.options.colorStop),u=this.radius-this.lineWidth/2,f=this.radius+this.lineWidth/2,this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(t,n,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.strokeStyle=i,this.ctx.beginPath(),this.ctx.arc(t,n,this.radius,(1-this.options.angle)*Math.PI,r,!1),this.ctx.stroke()},t}(s);u=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,n),t.prototype.strokeGradient=function(n,t,i,r){var u;return u=this.ctx.createRadialGradient(n,t,i,n,t,r),u.addColorStop(0,this.options.shadowColor),u.addColorStop(.12,this.options._orgStrokeColor),u.addColorStop(.88,this.options._orgStrokeColor),u.addColorStop(1,this.options.shadowColor),u},t.prototype.setOptions=function(n){var i,r,u,f;return n==null&&(n=null),t.__super__.setOptions.call(this,n),f=this.canvas.width/2,i=this.canvas.height/2,r=this.radius-this.lineWidth/2,u=this.radius+this.lineWidth/2,this.options._orgStrokeColor=this.options.strokeColor,this.options.strokeColor=this.strokeGradient(f,i,r,u),this},t}(r);window.AnimationUpdater={elements:[],animId:null,addAll:function(n){var r,t,u,i;for(i=[],t=0,u=n.length;t<u;t++)r=n[t],i.push(AnimationUpdater.elements.push(r));return i},add:function(n){return AnimationUpdater.elements.push(n)},run:function(n){var u,i,f,t,e,r;if(n==null&&(n=!1),f=isFinite(parseFloat(n)),f||n===!0){for(i=!0,r=AnimationUpdater.elements,t=0,e=r.length;t<e;t++)u=r[t],u.update(n===!0)&&(i=!1);return AnimationUpdater.animId=i?null:requestAnimationFrame(AnimationUpdater.run)}if(n===!1)return AnimationUpdater.animId===!0&&cancelAnimationFrame(AnimationUpdater.animId),AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run)}};typeof define=="function"&&window.define.amd!=null?define(function(){return{Gauge:f,Donut:u,BaseDonut:r,TextRenderer:t}}):typeof module!="undefined"&&module.exports!=null?module.exports={Gauge:f,Donut:u,BaseDonut:r,TextRenderer:t}:(window.Gauge=f,window.Donut=u,window.BaseDonut=r,window.TextRenderer=t)}).call(this);